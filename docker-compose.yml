services:
  bot:
    build: .
    container_name: english-words-bot
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - GOOGLE_SHEETS_CREDENTIALS_FILE=/app/credentials.json
    volumes:
      - ./english_learning.db:/app/english_learning.db
      - ./zerocoder-438112-b270bcc4038a.json:/app/credentials.json:ro
      - ./logs:/app/logs
    command: ["python", "-m", "src.telegram_bot"]
    # Ограничения ресурсов для предотвращения OOM kill (exit code 137)
    mem_limit: 512m
    mem_reservation: 256m

